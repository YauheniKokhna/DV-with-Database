
@{
    ViewBag.Title = "Index";

}

@*@{
        Layout = "~/Views/Shared/_Layout.cshtml";
    }*@

<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    @*<link rel="stylesheet" type="text/css" href="../../Content/Style.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto" rel="stylesheet">*@
    <script type="text/javascript" src="../../scripts/jquery-3.1.1.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

        //$(document).ready(function () {
        //    $("#Plot").on("click", Plot);
        //});



        //$(document).ready(function () {
        //    $("#Plot").on("click", PostParams(document.forms.form1));
        //});

        //function PostParams(oFormElement) {
        //    var xhr = new XMLHttpRequest();
        //    //xhr.onload = function () {
        //    //    alert(xhr.responseText);
        //    //}
        //    xhr.open(oFormElement.method, oFormElement.action, true);
        //    xhr.send(new FormData(oFormElement));


        //    xhr.onreadystatechange = function () {
        //        if (this.readyState == 4 && this.status == 200) {
        //            var data = JSON.parse(data);
        //            console.log(data);

        //        }
        //    };
        //}

        //function PostParams(oFormElement) {
        //    var xhr = new XMLHttpRequest();
        //    xhr.onload = function () {
        //        alert(xhr.responseText);
        //    }
        //    xhr.open(oFormElement.method, oFormElement.action, true);
        //    xhr.send(new FormData(oFormElement));


        //    xhr.onreadystatechange = function () {
        //        if (this.readyState == 4 && this.status == 200) {
        //            var data = JSON.parse(this.responseText);
        //            console.log(data);

        //        }
        //    };
        //}

        @*$(document).ready(function () {
            $("#Plot").on("click", postParams);
        });

        function postParams() {

            var a1 = $("#a").val();
            var b1 = $("#b").val();
            var c1 = $("#c").val();
            var step1 = $("#step").val();
            var rangeFrom1 = $("#rangeFrom").val();
            var rangeTo1 = $("#rangeTo").val();

            $.ajax({
                url: '@Url.Action("Compute")',
                type: "POST",
                //JSON.stringify({ x: 5, y: 6 });
                data: JSON.stringify({ a: a1.toString(), b: b1.toString(), c: c1.toString(), step: step1.toString(), rangeFrom: rangeFrom1.toString(), rangeTo: rangeTo1.toString() }),
                dataType: "json",
                contentType: "application/json",

                //позволяет выполнять различные функции, в зависимости от полученного статус-кода
                statusCode: {
                    201: function () {
                        alert("Created. Имя успешно добавлено в коллекцию.");
                    },
                    400: function () {
                        alert("Bad Request. Операция не выполнена.");
                    }
                },

                success: function (data, textStatus, xhr) {
                    // data - информация, переданная обратно в теле ответа
                    // textStatus - статус операции
                    // xhr - обьект XMLHttpRequest



                    $("#coordinates").append("<li>" + data + "</li>");
                },


            });
        }*@

        google.charts.load('current', { 'packages': ['corechart'] });
        //google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
            var data = google.visualization.arrayToDataTable([
              ['Year', 'Sales', 'Expenses'],
              ['2004', 1000, 400],
              ['2005', 1170, 460],
              ['2006', 660, 1120],
              ['2007', 1030, 540]
            ]);

            var options = {
                title: 'Company Performance',
                curveType: 'function',
                legend: { position: 'bottom' }
            };

            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

            chart.draw(data, options);
        }
    </script>


    <title>The Parabola Plotter</title>
</head>
<body>
    <script>
        function Plot() {
            //var postArray = document.getElementsByName('param')
            //postArray.forEach(function (item, i, postArray) { document.write(item)})
            var postArray = document.forms.form1;
            $.ajax({
                type: "POST",
                url: '@Url.Action("Compute")',
                data: postArray,
                //dataType: 'json',
                success: function (data) {
                    console.log('success'); console.log(data);
                    dataForChart = JSON.parse(data)
                    alert("dataForChart");
                }
            })
        }
    </script>

    <div>
        <form name="form1">
            Function: y=
            <input id="a" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
            x^2+
            <input id="b" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
            x+
            <input id="c" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
            <br />Step:
            <input id="step" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
            <br />From:
            <input id="rangeFrom" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
            to
            <input id="rangeTo" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
            <button id="Plot" onclick="Plot()">Plot</button>
        </form>
    </div>

    @*<div>
            <form method="post" action="/Home" onsubmit="return Plot(this)">
                Function: y=
                <input id="a" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                x^2+
                <input id="b" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                x+
                <input id="c" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                <br />Step:
                <input id="step" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                <br />From:
                <input id="rangeFrom" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                to
                <input id="rangeTo" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                <button id="Plot">Plot</button>
            </form>
        </div>*@

    @*<div>
                Function: y=
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                x^2+
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                x+
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                <br />Step:
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                <br />From:
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                to
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                <input type="button" value="Plot" onclick="Plot()" />
        </div>*@

    @*<div>
            <form method="post" action="/Home/Compute" target="result">
                Function: y=
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                x^2+
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                x+
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                <br />Step:
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                <br />From:
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                to
                <input name="param" pattern="(\d\.\d*)|(\d+)|(-\d+)" size="2" required>
                <input type="submit" value="Plot" onclick="Plot" />
            </form>
        </div>*@

    <frame src="/sidebar" name="result">
        <div id="curve_chart" style="width: 900px; height: 500px"></div>

        @*<p>Проверка</p>
            <p id="show"></p>
            <script>
                @using System.Web.Helpers;
            var data = @Html.Raw(Json.Encode(Model.Data))
            document.getElementById('show').innerHTML = data;
            </script>*@

        @*<asp:Chart ID="Chart1" Width="600px" BackColor="Gray"
                       BackSecondaryColor="WhiteSmoke" BackGradientStyle="DiagonalRight"
                       BorderlineDashStyle="Solid" BorderlineColor="Gray">
                <BorderSkin SkinStyle="Emboss" />
                <Titles>
                    <asp:Title Text="ASP.NET Chart" Font="Utopia,16" />
                </Titles>
                <Series>
                    <asp:Series Name="SplineSeries" ChartType="Spline" BorderWidth="3" ShadowOffset="2"
                                Color="PaleVioletRed">
                        <Points>
                            <asp:DataPoint YValues="3" />
                            <asp:DataPoint YValues="7" />
                            <asp:DataPoint YValues="13" />
                            <asp:DataPoint YValues="2" />
                            <asp:DataPoint YValues="7" />
                            <asp:DataPoint YValues="15" />
                            <asp:DataPoint YValues="23" />
                            <asp:DataPoint YValues="20" />
                            <asp:DataPoint YValues="1" />
                            <asp:DataPoint YValues="5" />
                            <asp:DataPoint YValues="7" />
                            <asp:DataPoint YValues="6" />
                        </Points>
                    </asp:Series>
                </Series>
                <ChartAreas>
                    <asp:ChartArea Name="ChartArea1" BackColor="Wheat" />
                </ChartAreas>
            </asp:Chart>*@

        @*<script>
                function Plot() {
                    $.ajax({
                        type: 'GET',
                        url: '@Url.Action("Compute")',
                        success: function (data) {
                            console.log('success'); console.log(data); $.each(data, function (i) {
                                $("#inputPlace").append('<asp:DataPoint XValues=' + '/>' + '<br/>')
                            })

                        }
                    })
                }
            </script>*@

        @*var reg = /\d/;
            var inputArray = document.getElementsByName("param").innerHTML;
            var a = document.getElementsByName("a").innerHTML;
            var b = document.getElementsByName("b").innerHTML;
            var c = document.getElementsByName("c").innerHTML;
            var step = document.getElementsByName("step").innerHTML;
            var minR = document.getElementsByName("minR").innerHTML;
            var maxR = document.getElementsByName("maxR").innerHTML;
            var inputArray = [a, b, c, step, minR, maxR];
            alert(inputArray);
            var verifiedArray
            forEach (function (item, i, inputArray){
                if (item.)
            })*@


        @*<script>
                var label1 = 'Производители грузовых автомобилей (JS)';
                function showDetails() {
                    if (document.getElementById("demo1").innerHTML == label1) {
                        document.getElementById("demo1").innerHTML += "<ul><li>MAN</li><li>Scania</li><li>Volvo</li><li>MAZ</li><li>KaMAZ</li></ul>"
                    }
                    else {
                        document.getElementById("demo1").innerHTML = label1;
                    }
                }

                var label2 = 'Производители спецтехники (JS+XMLHttpRequest)';
                function loadDetails() {
                    var xhttp = new XMLHttpRequest();
                    if (document.getElementById("demo2").innerHTML == label2) {
                        xhttp.onreadystatechange = function () {
                            if (this.readyState == 4 && this.status == 200) {
                                document.getElementById("demo2").innerHTML += this.responseText;
                            }
                        }
                    }
                    else {
                        document.getElementById("demo2").innerHTML = label2;
                    }
                    xhttp.open("GET", "../../Sp_Machinery_Manufacturers.txt", true);
                    xhttp.send();
                }

                function loadDetailsAjax() {
                    console.log('click')
                    if (document.getElementById("inputDemo3").innerHTML == "") {
                        $.ajax({
                            type: 'GET',
                            url: '@Url.Action("GetContent")',
                            success: function (data) {
                                console.log('success'); console.log(data); $.each(data, function (i) {
                                    $("#inputDemo3").append("<li>" + data[i] + "</li>")
                                })
                            },
                            error: function (data) { console.log('error'); }
                        });
                    }
                    else
                        document.getElementById("inputDemo3").innerHTML = "";
                }
            </script>

            <h1>Краткий обзор производителей техники:</h1>

            <div class="demo">
                <h2 id="demo1" onclick="showDetails()">Производители грузовых автомобилей (JS)</h2>
            </div>

            <div class="demo">
                <h2 id="demo2" onclick="loadDetails()">Производители спецтехники (JS+XMLHttpRequest)</h2>
            </div>

            <div class="demo">
                <h2 id="demo3" onclick="loadDetailsAjax()">Производители мотоциклов (jQuery)</h2>
                <div>
                    <ul id="inputDemo3"></ul>
                </div>
            </div>*@

</body>
</html>
